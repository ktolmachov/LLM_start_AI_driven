# Правила и соглашения по разработке

Этот документ описывает правила и соглашения по разработке проекта ИИ-ассистента в виде Telegram-бота.

## Основные принципы

- **KISS (Keep It Simple, Stupid)** - все решения должны быть максимально простыми
- **Функциональное программирование** - предпочтительнее ООП
- **Минимальный код** - избегать избыточных абстракций
- **Модульность** - четкое разграничение ответственности между компонентами

## Стиль кода

- Использовать говорящие имена функций и переменных
- Добавлять краткие комментарии для неочевидных решений
- Следовать стилю PEP8 для Python кода
- Писать асинхронный код с использованием `async/await`

## Структура проекта

```
LLM_start_AI_driven/
├── bot.py           # Telegram бот и обработка сообщений
├── config.py        # Загрузка конфигурации
├── llm_client.py    # Взаимодействие с LLM API
├── logger.py        # Настройка логирования
├── main.py          # Точка входа приложения
├── doc/            # Документация
│   ├── product_idea.md
│   ├── tasklist.md
│   └── vision.md
└── tests/          # Тесты
    ├── test_bot.py
    ├── test_config.py
    └── test_llm.py
```

## Работа с зависимостями

- Использовать только утвержденные технологии из vision.md
- Управлять зависимостями через `pyproject.toml` и `uv`
- Избегать сторонних библиотек если функциональность можно реализовать стандартными средствами

## Обработка ошибок

- Использовать простую обработку исключений без сложной иерархии
- Логировать ошибки с достаточной информацией для отладки
- Обрабатывать сетевые ошибки при взаимодействии с API

## Конфигурация

- Все настройки должны загружаться из `.env` файла
- Не хардкодить токены, ключи API и другие чувствительные данные
- Использовать значения по умолчанию для необязательных параметров

## Работа с LLM

- Следовать подходу к работе с LLM из vision.md
- Сохранять историю диалогов в простых структурах данных
- Всегда включать системный промпт в запросы к LLM

## Виртуальное окружение

### Создание и активация

Windows:
```bash
python -m venv .venv
.venv\Scripts\activate
```

Linux/macOS:
```bash
python -m venv .venv
source .venv/bin/activate
```

### Установка зависимостей

```bash
pip install -r requirements.txt
# или
uv pip install -r requirements.txt
```

### Правила работы

- Всегда использовать виртуальное окружение для разработки и тестирования
- Запускать приложение и тесты только внутри активированного venv
- Не коммитить папку .venv и файлы локального окружения

## Процесс разработки

1. **Планирование**: Предложить подход к решению с примерами кода
2. **Согласование**: Дождаться подтверждения подхода
3. **Реализация**: Написать код согласно согласованному подходу
4. **Проверка**: Дождаться подтверждения реализации
5. **Инициация**: Обновить прогресс в tasklist.md и сделать коммит

## Коммиты

- Делать коммит после каждой завершенной итерации
- Использовать понятные сообщения: "Итерация X: Краткое описание"
- Включать все файлы, созданные/измененные в рамках итерации

## Тестирование

- Каждая итерация должна завершаться рабочим кодом
- Проверять работоспособность согласно критериям из tasklist.md
- Исправлять ошибки до перехода к следующей итерации

## Запрещено

- Отходить от принципов KISS
- Не следовать соглашениям из этого документа
- Переходить к следующей итерации без согласования
- Реализовывать задачи из других итераций
- Добавлять технологии не из vision.md
- Пропускать тестирование
- Делать коммиты без завершения итерации 